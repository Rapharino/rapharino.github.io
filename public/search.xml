<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
    
    <entry>
      <title><![CDATA[SpringCloud 第一弹 - Spring-cloud-config]]></title>
      <url>http://yoursite.com/2016/10/25/SpringCloud-1/</url>
      <content type="html"><![CDATA[<h2 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h2><blockquote>
<p>在一个高可用的<code>微服务架构</code>中,配置中心 是一个不可或缺的服务,用以集中管理应用程序在 运行时 所需的外部配置.避免了分布式系统所造成的配置无序,繁杂等问题.可配合版本管理系统,实现配置参数的实时推拉的方式刷新,并无需重启.典型应用如<code>Zookeeper</code>,百度的<code>DisConf</code>,淘宝的<code>Diamond</code>,<code>Spring Cloud Config</code> …</p>
</blockquote>
<a id="more"></a>
<h2 id="选型"><a href="#选型" class="headerlink" title="选型"></a>选型</h2><p>之所以选择 <code>Spring Cloud Config</code>:</p>
<ul>
<li>社区活跃,更新频繁.</li>
<li>无痕衔接 Spring 4 属性管理 API</li>
<li>极高的定制化能力.</li>
<li>基于<code>SpringBoot</code>,天生的适合云服务的开发和部署.</li>
</ul>
<h2 id="Spring-属性管理："><a href="#Spring-属性管理：" class="headerlink" title="Spring 属性管理："></a>Spring 属性管理：</h2><p>其实是在 Spring3.1 就提供了新的属性管理API,功能强大,设计极其具有美感.</p>
<h3 id="常见-API"><a href="#常见-API" class="headerlink" title="常见 API"></a>常见 API</h3><ul>
<li><code>PropertySource</code>：属性源，key-value属性对抽象，比如用于配置数据</li>
<li><code>PropertyResolver</code>：属性解析器，用于解析相应key的value</li>
<li><code>Environment</code>：环境，本身是一个PropertyResolver，但是提供了<code>Profile</code>特性，即可以根据环境得到相应数据（即激活不同的Profile，可以得到不同的属性数据，比如用于多环境场景的配置（正式机、测试机、开发机DataSource配置））</li>
<li><code>Profile</code>：剖面，只有激活的剖面的组件/配置才会注册到Spring容器，类似于maven中profile</li>
</ul>
<h2 id="开始构建"><a href="#开始构建" class="headerlink" title="开始构建"></a>开始构建</h2><h3 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h3><p>推荐使用 Maven 作为项目构建工具.(<a href="http://www.bysocket.com/?p=1124" target="_blank" rel="external">如若不了解 SpringBoot</a>)<br>目录如下:<br><img src="http://oextu0tw4.bkt.clouddn.com/14773239279405.jpg" alt=""></p>
<h3 id="Pom-文件"><a href="#Pom-文件" class="headerlink" title="Pom 文件"></a>Pom 文件</h3><figure class="highlight xml"><figcaption><span>pom.xml</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-config-server<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div></pre></td></tr></table></figure>
<h3 id="创建Main-Class"><a href="#创建Main-Class" class="headerlink" title="创建Main-Class"></a>创建Main-Class</h3><figure class="highlight java"><figcaption><span>Application.java</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * <span class="doctag">@see</span> org.springframework.boot.autoconfigure.SpringBootApplication  Annotate SpringBoot Application</div><div class="line"> * <span class="doctag">@see</span> org.springframework.cloud.config.server.EnableConfigServer    Annotate ConfigServer Application</div><div class="line"> *</div><div class="line"> * Created by Rapharino on 2016/10/02.</div><div class="line"> */</div><div class="line"><span class="meta">@SpringBootApplication</span></div><div class="line"><span class="meta">@EnableConfigServer</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Application</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Logger LOGGER = LoggerFactory.getLogger(Application.class);</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line"></div><div class="line">        ConfigurableApplicationContext configurableApplicationContext = SpringApplication</div><div class="line">                .run(Application.class, args);</div><div class="line">        Environment environment = configurableApplicationContext.getEnvironment();</div><div class="line"></div><div class="line">        LOGGER.info(<span class="string">"Server with active profiles:&#123;&#125; is running at http://&#123;&#125;:&#123;&#125;"</span>,environment.getActiveProfiles(),environment.getProperty(<span class="string">"server.address"</span>), environment.getProperty(<span class="string">"server.port"</span>));</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="仓储配置"><a href="#仓储配置" class="headerlink" title="仓储配置"></a>仓储配置</h3><p>推荐使用 git 作为配置文件的版本管理.<br><img src="http://oextu0tw4.bkt.clouddn.com/14773243182721.jpg" alt=""></p>
<p>在 SpringCloud 家族中推荐,YAML 作为外部配置文件的声明语法.<br><a href="http://www.ruanyifeng.com/blog/2016/07/yaml.html?f=tt" target="_blank" rel="external">推荐阮一峰老师的关于 YAML 的简介</a></p>
<h4 id="配置读取顺序"><a href="#配置读取顺序" class="headerlink" title="配置读取顺序"></a>配置读取顺序</h4><p><code>SpringBoot</code> 配置使用一个特别的顺序进行合理的配置和覆盖.允许开发者通过配置服务,静态文件,环境变量,命令行参数,注解类等,用以外化配置.覆盖顺序如下:</p>
<ol>
<li>命令行参数</li>
<li>来自于 java:comp/env 的 JNDI 属性</li>
<li>操作系统环境变量</li>
<li>在打包的 jar 外的配置文件(包括 propertis,yaml,profile变量.)</li>
<li>在打包的 jar 内的配置文件(包括 propertis,yaml,profile变量.)</li>
<li>@Configuration 类的@PropertySource 注解</li>
<li>应用框架默认配置</li>
</ol>
<p>并且可通过新的 Api 进行配置的优雅注入.如:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Bean</span></div><div class="line"><span class="meta">@Primary</span></div><div class="line"><span class="meta">@ConfigurationProperties</span>(prefix = <span class="string">"spring.datasource"</span>)</div><div class="line"><span class="function"><span class="keyword">public</span> DataSource <span class="title">dataSource</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> DruidDataSource();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="结尾"><a href="#结尾" class="headerlink" title="结尾"></a>结尾</h2><p>代码由 <a href="https://github.com/Gexin-Team/cloud-in-action" target="_blank" rel="external">https://github.com/Gexin-Team/cloud-in-action</a> 托管. 出自 Gexin 团队.</p>
<h3 id="相关连接"><a href="#相关连接" class="headerlink" title="相关连接"></a>相关连接</h3><p><a href="http://docs.spring.io/spring-boot/docs/1.4.0.RELEASE/reference/html/" target="_blank" rel="external">http://docs.spring.io/spring-boot/docs/1.4.0.RELEASE/reference/html/</a><br><a href="http://cloud.spring.io/spring-cloud-static/spring-cloud-config/1.2.0.M1/" target="_blank" rel="external">http://cloud.spring.io/spring-cloud-static/spring-cloud-config/1.2.0.M1/</a><br><a href="https://segmentfault.com/a/1190000005029218" target="_blank" rel="external">https://segmentfault.com/a/1190000005029218</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[努力不成为曾经讨厌的人]]></title>
      <url>http://yoursite.com/2016/10/19/%E5%8A%AA%E5%8A%9B%E4%B8%8D%E6%88%90%E4%B8%BA%E6%9B%BE%E7%BB%8F%E8%AE%A8%E5%8E%8C%E7%9A%84%E4%BA%BA/</url>
      <content type="html"><![CDATA[<p><img src="http://oextu0tw4.bkt.clouddn.com/2016-10-19-14768529565356.jpg" alt=""><br>想必 大多数人相对于锤子的产品和设计,更感兴趣的是老罗的相声.<br>这是锤子发布会 最悲哀和痛心的地方.<br>整场下来,老罗叹息声频出…<br>隐感到的 是心酸,妥协的无奈,还有强忍着 “极力迎合”的不屈…<br><a id="more"></a><br><img src="http://oextu0tw4.bkt.clouddn.com/2016-10-19-14768529489279.jpg" alt=""></p>
<blockquote>
<p>努力不成为自己曾讨厌过的人.<br>或者…尽量延迟这个时间的到来.<br>这是最大的妥协了.</p>
</blockquote>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Hello World]]></title>
      <url>http://yoursite.com/2016/10/10/hello-world/</url>
      <content type="html"><![CDATA[<h2 id="难得此刻"><a href="#难得此刻" class="headerlink" title="难得此刻"></a>难得此刻</h2><blockquote>
<p>终于”停一停”了.<br>   想着开始 HelloWorld!</p>
</blockquote>
<h2 id="关于Rapharino"><a href="#关于Rapharino" class="headerlink" title="关于Rapharino"></a>关于Rapharino</h2><p>全名为 Raphael + Carino (意大利文+英文)<br>Raphael :意大利文发音,《圣经·旧约》中的四大天使其二，司琴天使。<br>Carino :一首轻音乐.<br><a id="more"></a><br><img src="http://oextu0tw4.bkt.clouddn.com/yl.png" alt="y"><br>至于”Redvlevet”,只是因为”撞名”了.<br>因此吸取教训,Rapharino有关的主要 社交平台,账户,邮箱,域名.都在今晚被我注册了.~.~</p>
<h2 id="关于博客"><a href="#关于博客" class="headerlink" title="关于博客"></a>关于博客</h2><p>关于博客的由来,这是个很严肃的答案.</p>
<ul>
<li>因为”Rapharino”.(50%)</li>
<li>为了社交和自我营销增值.(20%)</li>
<li>恐慌和发泄.(20%)</li>
<li>满足程序员天生的个人英雄主义和可敬的开源思想.(10%)</li>
</ul>
<p>心血来潮,熬夜8小时就完成了.坚持更新吧…(包括 一些技术,一些吐槽,一些所思所感.)</p>
<h2 id="关于建站"><a href="#关于建站" class="headerlink" title="关于建站"></a>关于建站</h2><p>git,gitpage,node,hexo,text…这是都是关键字,自行google吧.写的都很好,没必要重复了.不过建议配合 webstrom,mweb.多写点脚本.不然还是挺麻烦的.<br><strong><em> 或者给我留言,请我喝杯咖啡.免费为你搭建和维护.这个可以有吧?哈哈哈哈哈~~~ </em></strong><br><img src="http://oextu0tw4.bkt.clouddn.com/hh.jpg" alt="hh"></p>
]]></content>
    </entry>
    
  
  
    
    <entry>
      <title></title>
      <url>http://yoursite.com/baidu_verify_6ArRBighOY.html</url>
      <content type="html"><![CDATA[6ArRBighOY]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[分类]]></title>
      <url>http://yoursite.com/categories/index.html</url>
      <content type="html"></content>
    </entry>
    
    <entry>
      <title><![CDATA[标签]]></title>
      <url>http://yoursite.com/tags/index.html</url>
      <content type="html"></content>
    </entry>
    
  
</search>
